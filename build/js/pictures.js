function getByClass(e,t){for(var n=t?document.getElementById(t):document,a=[],l=n.getElementsByTagName("*"),o=0,i=l.length;o<i;o++)l[o].className==e&&a.push(l[o]);return a}function drag(){var e=document.getElementById("dog");e.onmousedown=fnDown}function fnDown(e){e=EventUtil.getEvent();var t=document.getElementById("dog"),n=e.clientX-t.offsetLeft,a=e.clientY-t.offsetTop;document.onmousemove=function(e){fnMove(e,n,a)},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}function fnMove(e,t,n){var a=document.getElementById("dog"),l=e.clientX-t,o=e.clientY-n,i=document.getElementById("backhome").offsetWidth,s=document.getElementById("backhome").offsetHeight,c=i-a.offsetWidth,u=s-a.offsetHeight;l<0?l=0:l>c&&(l=c),o<0?o=0:o>u&&(o=u),a.style.left=l+"px",a.style.top=o+"px"}function register(){function e(){f&&f&&p&&v?(m.removeAttribute("disabled"),$("#submit").addClass("readySubmit")):(m.setAttribute("disabled",""),$("#submit").removeClass("readySubmit"))}var t=document.getElementById("name"),n=document.getElementById("count"),a=document.getElementById("psw"),l=document.getElementById("psw2"),o=document.getElementById("email"),i=document.getElementById("form"),s=document.getElementsByClassName("name_msg")[0],c=document.getElementsByClassName("psw_msg")[0],u=document.getElementsByClassName("psw2_msg")[0],r=document.getElementsByClassName("email_msg")[0],a=document.getElementById("psw"),l=document.getElementById("psw2"),d=getByClass("intensity")[0].getElementsByTagName("span"),m=document.getElementById("submit"),f=!1,g=!1,p=!1,v=!1,y=0;t.onfocus=function(){s.style.display="inline-block"},t.onkeyup=function(){n.style.visibility="visible",y=getLength(this.value),n.innerHTML=y+"个字符",0==y&&(n.style.visibility="hidden")},t.onblur=function(){var t=/[^\w\u4e00-\u9fa5]/g;t.test(this.value)?(s.innerHTML="<i class='fa fa-close'>含有非法字符</i>",f=!1):""==this.value?(s.innerHTML="<i class='fa fa-close'>不能为空</i>",f=!1):y>25?(s.innerHTML="<i class='fa fa-close'>不能超出25个字符</i>",f=!1):y<6?(s.innerHTML="<i class='fa fa-close'>不能少于6个字符</i>",f=!1):(s.innerHTML="<i class='fa fa-check-square'>OK!</i>",f=!0),e()},a.onfocus=function(){c.style.display="inline-block",c.innerHTML="<i class='fa fa-lightbulb-o'>6-16个字符，不能单独使用字母、数字或符号</i>"},a.onkeyup=function(){this.value.length>5?(d[1].className="active",l.removeAttribute("disabled"),u.style.display="inline-block"):(d[1].className="",l.setAttribute("disabled",""),u.style.display="none"),this.value.length>10?(d[2].className="active",l.removeAttribute("disabled"),u.style.display="inline-block"):d[2].className=""},a.onblur=function(){var t=findStr(a.value,a.value[0]),n=/[^\d]/g,l=/[^a-zA-Z]/g;""==this.value?(c.innerHTML="<i class='fa fa-close'>不能为空</i>",p=!1):t==this.value.length?(c.innerHTML="<i class='fa fa-close'>不能为相同字符</i>",p=!1):this.value.length<6||this.value.legth>16?(c.innerHTML="<i class='fa fa-close'>长度应为6-16个字符</i>",p=!1):n.test(this.value)?l.test(this.value)?(c.innerHTML="<i class='fa fa-check-square'>OK!</i>",p=!0):(c.innerHTML="<i class='fa fa-close'>不能全部为字母</i>",p=!1):(c.innerHTML="<i class='fa fa-close'>不能全部为数字</i>",p=!1),e()},l.onkeyup=function(){l.value!=a.value?(u.innerHTML="<i class='fa fa-close'>两次输入不一致</i>",v=!1):(u.innerHTML="<i class='fa fa-check-square'>OK!</i>",v=!0),e()},o.onfocus=function(){r.style.display="inline-block"},o.onblur=function(){var t=/^[\w_\-\.]+@[\w]+\.([\w]{2,4})$/g;t.test(this.value)?(r.innerHTML="<i class='fa fa-check-square'>OK!</i>",g=!0):(r.innerHTML="<i class='fa fa-close'>请输入正确的邮箱格式</i>",g=!1),e()},EventUtil.addHandler(i,"submit",function(e){e=EventUtil.getEvent(e);EventUtil.getTarget(e);m.setAttribute("disabled",""),$("#submit").removeClass("readySubmit"),$.ajax({type:"post",url:"api/register",data:$("#form").serialize(),success:function(){alert("注册成功")},error:function(){alert("注册失败")}})})}function getLength(e){return e.replace(/[^\x00-xff]/g,"xx").length}function findStr(e,t){for(var n=0,a=0;a<e.length;a++)e.charAt(a)==t&&n++;return n}function countdown(){var e=new Date(2016,9,11),t=new Date,n=parseInt((e-t)/1e3),a=parseInt(n/86400),l=parseInt(n/3600%24),o=parseInt(n/60%60),i=parseInt(n%60),s=document.getElementById("countdown");s.innerHTML="距离我下一个十八岁生日还有："+a+"天"+l+"小时"+o+"分钟"+i+"秒"}function waterfall(e,t){var n=document.getElementById(e),a=getByClass(t,e),l=a[0].offsetWidth,o=Math.floor(document.documentElement.clientWidth/l);n.style.cssText="position:relative;width:"+l*o+"px;margin:0 auto;";for(var i=[],s=0;s<a.length;s++)if(s<o)i.push(a[s].offsetHeight);else{var c=Math.min.apply(null,i),u=i.indexOf(c);a[s].style.position="absolute",a[s].style.left=a[u].offsetLeft+"px",a[s].style.top=c+"px",i[u]+=a[s].offsetHeight}n.style.height=Math.max.apply(null,i)+"px"}function checkscrollside(){var e=document.getElementById("main"),t=getByClass("pin",e),n=t[t.length-1].offsetTop+Math.floor(t[t.length-1].offsetHeight/2),a=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.clientHeight;return n<a+l}var EventUtil={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=null},removeHandler:function(e,t,n){e.removeHandler?e.removeHandler(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!1}};window.onload=function(){drag(),register(),setInterval(countdown,1e3),waterfall("album","pin");var e={data:["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg","6.jpg","7.jpg","8.jpg","9.jpg","10.jpg","11.jpg","12.jpg"]};window.onscroll=function(){for(;checkscrollside()&&(document.documentElement.scrollTop||document.body.scrollTop)<400;){for(var t=document.getElementById("album"),n=0;n<e.data.length;n++){var a=document.createElement("div"),l=document.createElement("div"),o=document.createElement("img");a.className="pin",l.className="box",t.appendChild(a),a.appendChild(l),l.appendChild(o),o.src="images/"+e.data[n]}waterfall("album","pin")}},$(function(){$(window).scroll(function(){$(window).scrollTop()>250?$("#backTop").fadeIn(500):$("#backTop").fadeOut(300)}),$("#backTop").click(function(){return $("body, html").animate({scrollTop:0},1e3),!1})})};